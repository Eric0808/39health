KISSY.add("selectAdjust",function(d,b,c){function a(f){var e=this;a.superclass.constructor.call(e,f);e._init()}d.extend(a,c,{_init:function(){var f=this,h=f.get("el"),g=f.get("refer"),e=f.get("select");f._initPosition(h,g)&&h.hide();f._showController(h,e);f._selectController(h,e);d.one(window).on("resize",function(i){f._initPosition(h,g)})},_initPosition:function(h,g){var e=this,f=g.innerWidth(),j=g.offset().left-e.get("select").offset().left,i=e.get("select").innerHeight()-2;h.css({width:f,top:i,left:j})},_showController:function(i,e){var g=this,f=false,h=false;e.on(g.get("trigger").show,function(j){h=true;d.one(this).addClass("bao-select-on");g._initPosition(i,g.get("refer"));i.show()}).on(g.get("trigger").hide,function(j){h=false;d.later(function(){if(!f){g.get("select").removeClass("bao-select-on");i.hide()}})});i.on(g.get("trigger").show,function(j){f=true}).on(g.get("trigger").hide,function(j){f=false;d.later(function(){if(!h){g.get("select").removeClass("bao-select-on");i.hide()}})})},_selectController:function(g,e){var f=this;g.all(f.get("optCls")).on(f.get("optTrigger"),function(i){var h="";h=d.one(this).text()||"";e.one(".value").text(h);e.removeClass("bao-select-on");d.one(this).siblings().removeClass(f.get("optSelectedCls").slice(1));d.one(this).addClass(f.get("optSelectedCls").slice(1));g.hide()})}},{ATTRS:{el:{value:null},refer:{value:null},select:{value:null},trigger:{value:{show:"mouseenter",hide:"mouseleave"}},left:{value:0},optCls:{value:".opt"},optTrigger:{value:"click"},optSelectedCls:{value:".selected"}}});return a},{requires:["node","base"]});KISSY.add("selectColumsAdjust",function(c,b){function a(e){var d=this;a.superclass.constructor.call(d,e);d._init()}c.extend(a,b,{_initPosition:function(g,f){var d=this,e=f.innerWidth(),i=f.offset().left-d.get("select").offset().left,h=d.get("select").innerHeight()-2;g.css({width:e-parseInt(g.css("padding-left")),top:h,left:i})},_selectController:function(f,d){var e=this;f.all(e.get("optCls")).on(e.get("optTrigger"),function(h){var g="";g=c.one(this).one(".name").text()||"";if(g.length>6){g=g.slice(0,4);g+="..."}d.one(".value").text(g);e.get("select").removeClass("bao-select-on");c.one(this).siblings().removeClass(e.get("optSelectedCls").slice(1));c.one(this).addClass(e.get("optSelectedCls").slice(1));f.hide()})}},{ATTRS:{}});return a},{requires:["selectAdjust"]});KISSY.use("selectAdjust",function(b,a){if(b.one(".J_pay_hd")){var d=new a({el:b.one(".J_pay_bd"),refer:b.one(".J_pay_hd"),select:b.one(".J_pay_hd")})}if(b.one(".J_price_hd")){var c=new a({el:b.one(".J_price_bd"),refer:b.one(".J_price_hd"),select:b.one(".J_price_hd")})}});KISSY.use("selectColumsAdjust",function(b,a){if(b.one(".J_merchant_hd")){var c=new a({el:b.one(".J_merchant_bd"),refer:b.one(".htg-nav"),select:b.one(".J_merchant_hd")})}});KISSY.use("brix/gallery/placeholder/index",function(b,a){if(b.one("#keyword")){var c=new a({el:"#keyword"})}});KISSY.ready(function(a){var b="kkk1";if(a.one(".search_btn")){a.all(".search_btn").on("mouseenter",function(){a.one(this).css({color:"#ff8143"})}).on("mouseleave",function(){a.one(this).css({color:"#e0b69d"})})}if(a.one(".special-box")){a.all(".special-box").all("li").on("mouseenter",function(){a.one(this).one(".title-bg").animate({filter:"alpha(opacity=80)",opacity:0.8,background:"#602300"},{duration:0.1})}).on("mouseleave",function(){a.one(this).one(".title-bg").animate({filter:"alpha(opacity=50)",opacity:0.5,background:"#000000"},{duration:0.01})})}if(a.one(".tags-box")){a.all(".tags-box").all(".group").on("mouseenter",function(){a.one(this).one(".target").animate({filter:"alpha(opacity=100)",opacity:1},{duration:0.1})}).on("mouseleave",function(){if(!a.one(this).hasClass("group-on")){a.one(this).one(".target").animate({filter:"alpha(opacity=0)",opacity:0},{duration:0.01})}})}if(a.one(".bao-btns")){a.all(".bao-btns").all("a").on("mouseenter",function(){if(a.one(this).hasClass("sel")){return false}a.one(this).addClass("on")}).on("mouseleave",function(){a.one(this).removeClass("on")}).on("click",function(){var d=a.one(this);if(d.hasClass("sel")&&!d.hasClass("icon")){return false}var c=d.parent(".bao-btns").all("a").removeClass("sel");d.addClass("sel");if(d.hasClass("icon")){if(d.hasClass("asc")){d.removeClass("asc").addClass("desc")}else{d.removeClass("desc").addClass("asc")}}else{c.removeClass("asc desc")}})}if(a.one(".bao-search")){a.all(".bao-search").all("a").on("click",function(){var c=a.one(this).animate({display:"none"},{duration:3});a.one(this).prev(".loading").animate({display:"block"},{duration:3});setTimeout(function(){a.all(".bao-search").all(".loading").animate({display:"none"},{duration:3});c.animate({display:"block"},{duration:3})},1500)})}if(a.one(".bao-list")){a.all(".bao-list").all(".bao-list-item").on("mouseenter",function(){a.one(this).addClass("bao-list-on shadow35")}).on("mouseleave",function(){a.one(this).removeClass("bao-list-on shadow35")})}});KISSY.ready(function(a){if(!a.one(".htg-nav-blank")){return}var d=a.one(".htg-nav");var e=a.one(".htg-nav-blank");var b=false;var c=a.one("#search").offset().top+a.one("#search").innerHeight();if(a.UA.ie===6){a.one(window).on("scroll",function(f){var g=a.one(this).scrollTop();if(!b&&g>=c){d.addClass("htg-nav-fixed").addClass("shadow35");e.show();b=true}if(b&&g<=c){d.removeClass("htg-nav-fixed").removeClass("shadow35");e.hide();b=false}if(b){d.css("top",g)}});return}a.one(window).on("scroll",function(f){var g=a.one(this).scrollTop();if(!b&&g>=c){d.addClass("htg-nav-fixed").addClass("shadow35");e.show();b=true}if(b&&g<=c){d.removeClass("htg-nav-fixed").removeClass("shadow35");e.hide();b=false}})});KISSY.ready(function(c){var b=c.one(".J_buyers_btn"),e=c.one(".J_buyers"),f=c.one(".J_arrow"),a=false,d=false;if(!b||!e){return}b.on("click",function(g){if(d){return}if(a){d=true;e.slideUp(0.2,function(){f.hide();d=false});a=false}else{d=true;f.show();e.slideDown(0.2,function(){d=false});a=true}})});KISSY.ready(function(a){a.use("etaologin",function(c,e){var d=c.all;var b=new e();d(document).delegate("click",".favbox",function(h){if(!b.checkLongOrTrueLogin()){b.show();return false}var f=d(h.currentTarget);var g="http://haiwai.etao.com/ajax/want_buy.htm";var i=f.attr("itemid");c.io({url:g,dataType:"json",data:{item_id:i},success:function(j){if(j.wantbuy||j.notwantbuy){f.toggleClass("favbox-faved")}else{}}});return false});d(document).delegate("click",".favbox .favlist span",function(h){var g=d(h.currentTarget);var f=g.attr("href");window.open(f);return false})})});KISSY.use("waterfall, ajax, gallery/template/1.0/, node, button, uri",function(S,Waterfall,io,Template,Node,Button,Uri){var $=Node.all;if(S.one("#J_bao_list")){var tpl=Template($("#tpl").html()),oldPage=-1,isFirstAjax=true,nextpage=1,morelink=".htg-pagination",waterfall=new Waterfall.Loader({container:"#J_bao_list",adjustEffect:{duration:0.3},load:function(success,end){S.one("#pbloading").show();var js_config=S.one("#J_bao_list").attr("js-config");js_config=eval("("+js_config+")");if(!js_config.addr){end();return}var page=new Uri(location.href).getQuery().get("p");if(!page){page=1}if(page!=oldPage){isFirstAjax=true;oldPage=page}var conf=S.merge({page:page,page_size:100,row:nextpage,row_size:5,format:"json"},js_config.conf);if(js_config.bao_id===true&&bao_list.length>=1){morelink="#bao-more";var idlist=[];for(var i=nextpage*conf.row_size-conf.row_size;i<nextpage*conf.row_size;i++){if(bao_list[i]){idlist.push(bao_list[i])}}if(idlist.length){conf=S.merge(conf,{page_size:bao_list.length,idList:idlist.join(",")})}else{S.one(morelink).show();S.one("#pbloading").hide();end();return}}if(js_config.count){if(conf.page>parseInt(js_config.count/conf.page_size)||js_config.count<conf.row_size){conf=S.merge(conf,{page_size:js_config.count%conf.page_size})}}S.ajax({data:conf,url:js_config.addr,dataType:"jsonp",jsonp:"jsoncallback",success:function(d){if(d.stat=="nodata"){S.one(morelink).show();end();return}if(d.stat!=="ok"){end();return}if(nextpage>Math.ceil(conf.page_size/conf.row_size)){S.one(morelink).show();end();return}nextpage++;var items=[];if(isFirstAjax){if(S.one("#secondNav")){items.push(new S.Node($("#secondNav").html()))}}S.each(d.baos.bao,function(item){items.push(new S.Node(tpl.render(item)))});if(js_config.count){if(js_config.count<conf.row_size&&nextpage>2){end();return}}success(items);if(isFirstAjax){isFirstAjax=false}if(S.one(".bao-list")){S.all(".bao-list").all(".bao-list-item").on("mouseenter",function(){S.one(this).addClass("bao-list-on shadow35")}).on("mouseleave",function(){S.one(this).removeClass("bao-list-on shadow35")})}},complete:function(){S.one("#pbloading").hide()}})},minColCount:1,colWidth:250})}});